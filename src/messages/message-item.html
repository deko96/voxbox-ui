<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../core/item-behavior.html">
<link rel="import" href="../core/list-item.html">

<dom-module id="message-item">
    <template>
        <list-item
            select-mode         = "[[selectMode]]"
            selected            = "[[selected]]"
            grid                = "[[grid]]"
            item                = "[[item]]"
            favoritable         = "[[favoritable]]">
                <div slot="date">[[_formatDate(item.timestamp)]]</div>
                <div slot="title">[[item.endpoint]]</div>
                <div slot="content">[[_truncated(item.content)]]</div>
        </list-item>
    </template>
    <script>
        var MAX_MESSAGE_LENGTH = 130;
        
        Polymer({
            is: 'message-item',

            behaviors: [
                ItemBehavior
            ],

            _truncated: function(content) {
                if (!this.grid) return content;
                return (content.length > MAX_MESSAGE_LENGTH) 
                ? content.substring(0, MAX_MESSAGE_LENGTH) + 'â€¦' : content;
            }

        });
    </script>
</dom-module>